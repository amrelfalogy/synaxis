<div class="car-details">
<!-- Hero Section -->
<div class="row">
  <div class="col-md-12">
    <section
      class="header img-fluid"
      style="background-image: url('assets/imgs/602-comp.webp')"
    >
      <div class="overlay"></div>
      <div class="header-content">
        <h1>{{ "CAR_DETAILS.hero-title" | translate }}</h1>
        <h3>
          <a routerLink="/home" style="color: inherit; text-decoration: none">
            {{ "about.BREADCRUMB.HOME" | translate }}
          </a>
          - <span> {{ "CAR_DETAILS.hero-title" | translate }} </span>
        </h3>
      </div>
    </section>
  </div>
</div>

<div class="car-details container my-5" *ngIf="car">
  <!-- Car Main Display -->
  <div class="row">
    <!-- Main Image -->
    <div class="col-md-7">
      <div class="main-image position-relative">
        <img
          [src]="mainImage"
          alt="Main Car Image"
          class="img-fluid rounded shadow-sm"
        />
      </div>
    </div>

    <!-- Car Info -->
    <div class="col-md-5">
      <div class="car-info p-4 bg-white rounded shadow-sm border" [attr.dir]="getCardDirection(car)">
        <h2 class="text-3xl font-bold title">{{ car.title }}</h2>
        <p class="text-muted">
          <i class="fa-solid fa-car-side text-muted"></i> {{ car.model }}
          <span class="mx-2">|</span>
          <i class="fa-solid fa-calendar text-muted"></i> {{ car.year }}
        </p>
        <div class="d-flex overview text-muted">
          <span>
            <i class="fa-solid fa-gauge-high"></i>
            {{ car.mileage }} km
          </span>
          <span class="mx-3">
            <i class="fa-solid fa-location-dot"></i>
            {{ car.city }}
          </span>
        </div>

        <p class="text-muted font-weight-bold description-title">
          {{ "Description" | translate }}:
        </p>
        <p class="text-muted" style="font-size: 1rem">
          {{ car.description }}
        </p>

        <p class="price font-weight-bold display-4">
          {{ car.price | currency : "EGP" }}
        </p>

        <p class="text-muted phone">
          <strong>
            <i class="fa-solid fa-phone text-success"></i>
            {{ "Phone" | translate }}:
            <span class="phone-number"> {{ car.phone }}</span>
          </strong>
        </p>

        <!-- Share Button -->
        <div class="content">
          <button class="shareButton main" (click)="toggleShareOptions()">
            <svg
              *ngIf="!showShareOptions && !linkCopied"
              class="share"
              viewBox="0 0 24 24"
            >
              <path
                d="M18,16.08C17.24,16.08 16.56,16.38 16.04,16.85L8.91,12.7C8.96,12.47 9,12.24 9,12C9,11.76 8.96,11.53 8.91,11.3L15.96,7.19C16.5,7.69 17.21,8 18,8A3,3 0 0,0 21,5A3,3 0 0,0 18,2A3,3 0 0,0 15,5C15,5.24 15.04,5.47 15.09,5.7L8.04,9.81C7.5,9.31 6.79,9 6,9A3,3 0 0,0 3,12A3,3 0 0,0 6,15C6.79,15 7.5,14.69 8.04,14.19L15.16,18.34C15.11,18.55 15.08,18.77 15.08,19C15.08,20.61 16.39,21.91 18,21.91C19.61,21.91 20.92,20.61 20.92,19A2.92,2.92 0 0,0 18,16.08Z"
              />
            </svg>

            <svg *ngIf="linkCopied" class="check" viewBox="0 0 24 24">
              <path
                d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"
              />
            </svg>

            <svg
              *ngIf="showShareOptions && !linkCopied"
              class="close"
              viewBox="0 0 24 24"
            >
              <path
                d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"
              />
            </svg>
          </button>

          <div *ngIf="showShareOptions" class="share-options">
            <!-- WhatsApp Share -->
            <a
              [href]="'https://api.whatsapp.com/send?text=Check out this: ' + encodedShareUrl"
              target="_blank"
              class="shareButton whatsapp"
            >
              <i class="fa-brands fa-whatsapp"></i>
            </a>

            <!-- Copy Link -->
            <button class="shareButton copy-link" (click)="copyLink()">
              <i class="fa-solid fa-link"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Gallery Section -->
  <div class="row" *ngIf="galleryImages.length > 0" style="margin: 10px auto">
    <div
      class="col-md-3 mb-4 gallary-col"
      *ngFor="let img of galleryImages; let i = index"
    >
      <div class="gallery-item position-relative">
        <img
          [src]="img"
          alt="Car Image"
          class="img-fluid rounded shadow-sm"
          (click)="swapMainImage(i)"
          style="cursor: pointer"
        />
      </div>
    </div>
  </div>
</div>
</div>